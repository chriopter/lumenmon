# MQTT configuration with TLS and authentication

# Use per-listener settings so ACL only applies to external listener
per_listener_settings true

# Internal listener (localhost only, no auth for mqtt-to-sqlite bridge)
listener 1883 127.0.0.1
allow_anonymous true
persistence false

# External TLS listener (for remote agents with authentication)
listener 8884
protocol mqtt
cafile /data/mqtt/server.crt
certfile /data/mqtt/server.crt
keyfile /data/mqtt/server.key
tls_version tlsv1.2
require_certificate false
allow_anonymous false
password_file /data/mqtt/passwd
acl_file /app/config/acl
