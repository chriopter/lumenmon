{#
Jinja2 template for agent table rows with server-rendered sparklines and formatted data.
Rendered by /api/agents/table endpoint. Returns HTML fragment fetched every 3 seconds by table.html.
#}
{% if agents %}
  {% for agent in agents %}
<tr class="agent-row {% if loop.index0 == 0 %}selected{% endif %}" data-index="{{ loop.index0 }}" data-agent-id="{{ agent.id }}" data-hostname="{{ agent.hostname if agent.hostname else '' }}" data-status="{{ agent.status }}" data-age="{{ agent.age_formatted }}" data-cpu-history='{{ agent.cpuHistory|tojson }}' data-mem-history='{{ agent.memHistory|tojson }}' data-disk-history='{{ agent.diskHistory|tojson }}'>
  <td title="ID: {{ agent.id }}"><span class="status-dot {{ agent.status }}" title="{{ agent.status }}"></span>{{ agent.hostname if agent.hostname else agent.id }}</td>
  <td>{{ "%.1f"|format(agent.cpu) }}%<span class="sparkline">{{ agent.cpuSparkline }}</span></td>
  <td>{{ "%.1f"|format(agent.memory) }}%</td>
  <td>{{ "%.1f"|format(agent.disk) }}%</td>
</tr>
  {% endfor %}
{% else %}
<tr>
  <td colspan="4" class="no-data">no agents connected</td>
</tr>
{% endif %}
