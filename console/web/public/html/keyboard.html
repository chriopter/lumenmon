<!--
Keyboard navigation event handler for TUI-style shortcuts.
Binds ↑/↓/j/k (navigation), Enter (detail), Esc (close), i (invite), r (refresh), h/? (help).
-->
<script>
    document.addEventListener('keydown', (e) => {
        if (e.target.tagName === 'INPUT' || e.target.tagName === 'TEXTAREA') {
            return;
        }

        const key = e.key.toLowerCase();

        if (key === 'arrowdown' || key === 'j') {
            e.preventDefault();
            moveSelection(1);
        } else if (key === 'arrowup' || key === 'k') {
            e.preventDefault();
            moveSelection(-1);
        } else if (key === 'enter') {
            e.preventDefault();
            openDetailView();
        } else if (key === 'escape') {
            e.preventDefault();
            // Close debug view if open, otherwise close detail view
            const debugModal = document.getElementById('debug-modal');
            if (debugModal && debugModal.style.display !== 'none') {
                closeDebugView();
            } else {
                closeDetailView();
            }
        } else if (key === 'i' && !e.ctrlKey && !e.metaKey && !e.altKey) {
            e.preventDefault();
            createInvite();
        } else if (key === 'r' && !e.ctrlKey && !e.metaKey && !e.altKey) {
            e.preventDefault();
            fetchAgents();
            addLog('manual refresh', 'info');
        } else if (key === 'd' && !e.ctrlKey && !e.metaKey && !e.altKey) {
            e.preventDefault();
            openDebugView();
        }
    });
</script>
