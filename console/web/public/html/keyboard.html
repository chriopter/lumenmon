<!--
Keyboard navigation event handler for TUI-style shortcuts.
Binds ↑/↓/j/k (navigation), Enter (detail), Esc (close), i (invite), r (refresh), h/? (help).
-->
<script>
    document.addEventListener('keydown', (e) => {
        if (e.target.tagName === 'INPUT' || e.target.tagName === 'TEXTAREA') {
            return;
        }

        const key = e.key.toLowerCase();

        if (key === 'arrowdown' || key === 'j') {
            e.preventDefault();
            moveSelection(1);
        } else if (key === 'arrowup' || key === 'k') {
            e.preventDefault();
            moveSelection(-1);
        } else if (key === 'enter') {
            e.preventDefault();
            openDetailView();
        } else if (key === 'escape') {
            e.preventDefault();
            closeDetailView();
        } else if (key === 'i' && !e.ctrlKey && !e.metaKey && !e.altKey) {
            e.preventDefault();
            createInvite();
        } else if (key === 'r' && !e.ctrlKey && !e.metaKey && !e.altKey) {
            e.preventDefault();
            fetchAgents();
            addLog('manual refresh', 'info');
        } else if (key === 'h' || key === '?') {
            e.preventDefault();
            showHelp();
        }
    });

    function showHelp() {
        const helpText = `Keyboard Shortcuts:

Navigation:
  ↑/k     - Move up
  ↓/j     - Move down
  Enter   - Open detail view
  Esc     - Close detail view

Actions:
  i       - Create invite
  r       - Refresh agents
  h/?     - Show help`;

        alert(helpText);
    }
</script>
