<!--
Invite creation component with clipboard copy functionality.
Calls /api/invites/create POST endpoint. Functions: createInvite(), copyToClipboard().
-->
<script>
    async function createInvite() {
        addLog('creating invite...', 'info');

        try {
            const response = await fetch('/api/invites/create/full', { method: 'POST' });
            if (!response.ok) throw new Error(`HTTP ${response.status}`);
            const data = await response.json();

            if (data.success) {
                // Invite created - will appear in sidebar
                // User can click it there to copy
            } else {
                addLog(`invite creation failed: ${data.error}`, 'error');
            }
        } catch (error) {
            console.error('Error:', error);
            addLog(`invite creation error: ${error.message}`, 'error');
        }
    }

    function copyInviteToClipboard(element, text) {
        navigator.clipboard.writeText(text).then(() => {
            const originalText = element.textContent;
            element.textContent = 'copied!';
            setTimeout(() => { element.textContent = originalText; }, 2000);
            addLog('invite url copied to clipboard', 'info');
        }).catch(err => {
            console.error('Copy failed:', err);
            addLog('clipboard copy failed', 'error');
        });
    }
</script>
