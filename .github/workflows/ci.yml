name: CI

on:
  push:
    branches: [main]
  pull_request:
    branches: [main]

jobs:
  test:
    runs-on: ubuntu-latest

    steps:
    - uses: actions/checkout@v5

    - name: Test shell scripts syntax
      run: |
        find . -name "*.sh" -type f -exec bash -n {} \;
        echo "✓ Shell scripts valid"

    - name: Test Docker builds
      run: |
        docker build -t test-console:ci ./console
        echo "✓ Console container builds"
        docker build -t test-agent:ci ./agent
        echo "✓ Agent container builds"