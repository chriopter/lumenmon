name: CI

on:
  push:
    branches: [main]
  pull_request:
    branches: [main]

jobs:
  test:
    runs-on: ubuntu-latest

    steps:
    - uses: actions/checkout@v4

    - name: Set up Python
      uses: actions/setup-python@v6
      with:
        python-version: '3.11'

    - name: Test Console Python imports
      run: |
        cd console/tui
        python3 -c "import main"
        echo "✓ Console TUI loads"

    - name: Test shell scripts syntax
      run: |
        find . -name "*.sh" -type f -exec bash -n {} \;
        echo "✓ Shell scripts valid"

    - name: Test Docker builds
      run: |
        docker build -t test-console:ci ./console
        echo "✓ Console container builds"
        docker build -t test-agent:ci ./agent
        echo "✓ Agent container builds"